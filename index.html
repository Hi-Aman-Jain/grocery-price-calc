<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Price Calculator</title>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyDhJcbnIIVzzsmMf0-vhTZWmn5_rwU0Jhk",
            authDomain: "grocery-price-calc.firebaseapp.com",
            projectId: "grocery-price-calc",
            storageBucket: "grocery-price-calc.appspot.com",
            messagingSenderId: "607691711505",
            appId: "1:607691711505:web:33228f4a0ff8d7787cbdb0",
            measurementId: "G-PHKG9NSPJX"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .scrollable-list {
            display: flex;
            overflow-x: auto;
            margin-bottom: 20px;
            padding: 10px 0;
        }

        .number-button {
            min-width: 60px;
            height: 40px;
            margin-right: 10px;
            border: 1px solid #ccc;
            border-radius: 20px;
            background-color: #f0f0f0;
            font-size: 16px;
            cursor: pointer;
        }

        .number-button.selected {
            background-color: #007bff;
            color: white;
        }

        .selected-price {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .price-table {
            width: 100%;
            border-collapse: collapse;
        }

        .price-table th,
        .price-table td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
        }

        .price-table th {
            background-color: #f0f0f0;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useCallback } = React;

        const ScrollableNumberList = ({ numbers, onSelect, selectedNumber }) => (
            <div className="scrollable-list">
                {numbers.map(num => (
                    <button
                        key={num}
                        className={`number-button ${selectedNumber === num ? 'selected' : ''}`}
                        onClick={() => onSelect(num)}
                    >
                        {num}
                    </button>
                ))}
            </div>
        );

        const PriceTable = ({ pricePerKg }) => {
            const calculatePrice = (amount) => (amount / 1000 * pricePerKg).toFixed(2);
            const calculateAmount = (portion) => (portion / pricePerKg * 1000).toFixed(2);

            return (
                <table className="price-table">
                    <thead>
                        <tr>
                            <th>Amount (Rs)</th>
                            <th>Portion (g)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>10</td><td>{calculateAmount(10)}</td></tr>
                        <tr><td>20</td><td>{calculateAmount(20)}</td></tr>
                        <tr><td>50</td><td>{calculateAmount(50)}</td></tr>
                        <tr><td>{calculatePrice(100)}</td><td>100</td></tr>
                        <tr><td>{calculatePrice(200)}</td><td>200</td></tr>
                        <tr><td>{calculatePrice(250)}</td><td>250</td></tr>
                    </tbody>
                </table>
            );
        };

        const PriceCalculator = () => {
            const [selectedPrice, setSelectedPrice] = useState(null);

            const firstRowNumbers = _.range(10, 110, 10);
            const secondRowNumbers = _.range(110, 260, 10);

            const handlePriceSelect = useCallback((price) => {
                setSelectedPrice(price);
            }, []);

            return (
                <div className="price-calculator">
                    <ScrollableNumberList
                        numbers={firstRowNumbers}
                        onSelect={handlePriceSelect}
                        selectedNumber={selectedPrice}
                    />
                    <ScrollableNumberList
                        numbers={secondRowNumbers}
                        onSelect={handlePriceSelect}
                        selectedNumber={selectedPrice}
                    />
                    {selectedPrice && (
                        <div className="selected-price">
                            Selected Price: Rs {selectedPrice}/kg
                        </div>
                    )}
                    {selectedPrice && <PriceTable pricePerKg={selectedPrice} />}
                </div>
            );
        };

        const App = () => {
            return (
                <div className="app">
                    <h1>Price Calculator</h1>
                    <PriceCalculator />
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>

</html>